<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.myboot.user.dao.UserDAO">

   <resultMap id="userResult" type="userVO">
      <result property="id" column="USER_ID" />
      <result property="pw" column="USER_PW" />
      <result property="name" column="USER_NAME" />
      <result property="email" column="USER_EMAIL" />
      <result property="tel" column="USER_TEL" />
      <result property="tel_sub" column="USER_TEL_SUB" />
      <result property="message" column="USER_MESSAGE" />
      <result property="birth" column="USER_BIRTH" />
      <result property="joinDate" column="JOINDATE" />
      <result property="grade" column="USER_GRADE" />
   </resultMap> 

<select id="loginById" resultType="userVO" parameterType="userVO" >
	<![CDATA[
		select USER_ID as id, USER_PW as pw, USER_NAME as name, USER_EMAIL as email,
	      USER_TEL as tel, USER_TEL_SUB as tel_sub, USER_MESSAGE as message,
	      USER_BIRTH as birth, JOINDATE, USER_GRADE as grade
	      from tb_user
	      where USER_ID=#{id} AND USER_PW=#{pw}
	]]>
  </select>
  
   <select id="selectAllUserList" resultMap="userResult">
      <![CDATA[
        select * from TB_USER order by joinDate desc			
      ]]>
   </select>
  
   <select id="overlappedID" parameterType="UserVO" resultType="int">
		select count(USER_ID) From TB_USER where USER_ID=#{id}
	</select>
   
<!--    <select id="selectName" resultType="String"> -->
<!--    	<![CDATA[ -->
<!--    		select USER_NAME from TB_USER -->
<!--    		where USER_ID='hong' -->
<!--    ]] -->
<!--    </select> -->
   
<!--    <select id ="selectPwd" resultType="int"> -->
<!--    	<![CDATA[ -->
<!--    		select pwd from TB_USER -->
<!--    		where id = 'hong' -->
<!--    		]]> -->
<!--    		</select> -->
<!--    	<select id="selectUserById" resultType="userVO" parameterType="String"> -->
<!--    	<![CDATA[ -->
<!--    		select*from TB_USER -->
<!--    		where -->
<!--    		id=#{id} -->
<!--    	]]> -->
<!--    	</select> -->
   		
<!--    	<select id="selectUserByPwd" resultMap="userResult" parameterType="int"> -->
<!--    	<![CDATA[ -->
<!--    		select*from TB_USER -->
<!--    		where -->
<!--    		pw = #{pw} -->
<!--    	]]> -->
<!--    	</select> -->
   	
   	<insert id="insertNewUser" parameterType="userVO">
   		<![CDATA[
    		insert into TB_USER(id,pwd, name,email) 
    		values(#{id},#{pwd},#{name},#{email}) 
    	]]> 
   	</insert>
   	
<!--    	<insert id="insertUser2" parameterType="java.util.HashMap"> -->
<!--    		<![CDATA[ -->
<!--    			insert into TB_USER(id,pwd,name,email) -->
<!--    		]]> -->
<!--    	</insert> -->

 		<!-- 회원 정보 수정 -->
     	<update id="updateUser" parameterType="userVO">
   		<![CDATA[
   				update TB_USER
   				set pw=#{pw}, email=#{email}, tel=#{tel},
   					tel_sub=#{tel_sub}, message=#{message}, birth=#{birth}
   				where
   				id=#{id}
   		]]>
   	  </update>
   	
<!--    	<delete id="deleteUser" parameterType="String"> -->
<!--    		<![CDATA[ -->
<!--    			delete from TB_USER -->
<!--    			where -->
<!--    			id=#{id} -->
<!--    		]]> -->
<!--    	</delete> -->

</mapper>